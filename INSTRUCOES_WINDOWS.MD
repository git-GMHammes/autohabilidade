# ConfiguraÃ§Ã£o n8n - Projeto Autohabilidade (Windows 10)

## ğŸ“ Estrutura do Projeto

Na pasta raiz `autohabilidade\` vocÃª deve ter os seguintes arquivos e pastas:

```
autohabilidade\                    (pasta raiz do projeto)
â”œâ”€â”€ docker-compose.yml             (configuraÃ§Ã£o principal)
â”œâ”€â”€ docker-compose.production.yml  (configuraÃ§Ã£o de produÃ§Ã£o)
â”œâ”€â”€ .env                          (variÃ¡veis de ambiente)
â”œâ”€â”€ setup.bat                     (script de configuraÃ§Ã£o)
â”œâ”€â”€ INSTRUÃ‡Ã•ES_WINDOWS.md         (este arquivo)
â”œâ”€â”€ README.md                     (documentaÃ§Ã£o do projeto)
â””â”€â”€ server_n8n\                  (pasta de dados - criada pelo setup.bat)
    â”œâ”€â”€ .n8n\                     (dados do n8n)
    â”œâ”€â”€ shared\                   (arquivos compartilhados)
    â”‚   â”œâ”€â”€ files\               (arquivos para processar)
    â”‚   â”œâ”€â”€ templates\           (templates)
    â”‚   â”œâ”€â”€ exports\             (saÃ­das)
    â”‚   â””â”€â”€ imports\             (entradas)
    â”œâ”€â”€ scripts\                  (scripts personalizados)
    â”œâ”€â”€ logs\                     (logs da aplicaÃ§Ã£o)
    â”œâ”€â”€ postgres_data\            (dados PostgreSQL)
    â””â”€â”€ redis_data\               (dados Redis)
```

## ğŸš€ PrÃ©-requisitos Windows 10

### 1. Docker Desktop
- Baixe e instale: https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe
- **IMPORTANTE:** Certifique-se que o WSL2 estÃ¡ habilitado
- Configure Docker Desktop para iniciar com Windows

### 2. Verificar WSL2
```powershell
wsl --list --verbose
```
Se nÃ£o tiver WSL2 instalado:
```powershell
wsl --install
```

## ğŸ“‹ ConfiguraÃ§Ã£o Inicial

### 1. Executar Setup
```cmd
# No prompt de comando (CMD) dentro da pasta autohabilidade
setup.bat
```

### 2. Verificar Docker Desktop
- Abra Docker Desktop
- Verifique se estÃ¡ rodando (Ã­cone da baleia na barra de tarefas)
- VÃ¡ em Settings > Resources > File Sharing
- Certifique-se que o drive onde estÃ¡ o projeto estÃ¡ compartilhado

### 3. Iniciar os Containers

**Modo Desenvolvimento (SQLite):**
```cmd
docker-compose up -d
```

**Modo ProduÃ§Ã£o (PostgreSQL + Redis):**
```cmd
docker-compose --profile production up -d
```

### 4. Verificar Status
```cmd
docker-compose ps
```

## ğŸŒ Acessar n8n

- **URL:** http://localhost:5678
- **Login:** admin
- **Senha:** admin123

## âš ï¸ Particularidades do Windows

### 1. PermissÃµes de Volume
- Windows usa permissÃµes diferentes do Linux
- O Docker Desktop jÃ¡ gerencia isso automaticamente
- NÃ£o Ã© necessÃ¡rio `chown` ou `chmod`

### 2. Paths nos Volumes
- Os paths nos volumes jÃ¡ estÃ£o configurados para Windows
- Docker Desktop converte automaticamente `\` para `/`

### 3. Firewall
Se tiver problemas de conexÃ£o:
```cmd
# Execute como Administrador
netsh advfirewall firewall add rule name="n8n" dir=in action=allow protocol=TCP localport=5678
```

### 4. Performance
Para melhor performance no Windows:
- Mantenha os dados na pasta do projeto (nÃ£o em drives de rede)
- Use SSD se possÃ­vel
- Configure Docker Desktop para usar mais recursos (Settings > Resources)

## ğŸ”§ Comandos Ãšteis Windows

### Parar containers
```cmd
docker-compose down
```

### Ver logs
```cmd
docker-compose logs n8n
```

### Limpar dados (CUIDADO!)
```cmd
docker-compose down -v
rmdir /s server_n8n
```

### Backup dos dados
```cmd
# Backup completo da pasta
xcopy server_n8n backup_server_n8n /E /I /H /Y
```

### Restart do Docker Desktop
```cmd
# Se tiver problemas, restart o Docker Desktop
"C:\Program Files\Docker\Docker\Docker Desktop.exe" --quit
"C:\Program Files\Docker\Docker\Docker Desktop.exe"
```

## ğŸ“ Troubleshooting Windows

### Erro "drive is not shared"
1. Docker Desktop > Settings > Resources > File Sharing
2. Adicione o drive onde estÃ¡ o projeto
3. Apply & Restart

### Erro "port already in use"
```cmd
# Verificar qual processo usa a porta
netstat -ano | findstr :5678
# Matar processo se necessÃ¡rio
taskkill /PID [PID_NUMBER] /F
```

### Erro de WSL2
```cmd
# Atualizar WSL2
wsl --update
# Reiniciar WSL2
wsl --shutdown
```

### Performance lenta
1. Docker Desktop > Settings > Resources
2. Aumentar Memory para 4GB+
3. Aumentar CPUs para 2+
4. Habilitar "Use the WSL 2 based engine"

## ğŸ¯ PrÃ³ximos Passos

1. Execute `setup.bat`
2. Execute `docker-compose up -d`
3. Acesse http://localhost:5678
4. Comece a criar seus workflows de automaÃ§Ã£o!

Os arquivos ficarÃ£o disponÃ­veis em `server_n8n\shared\` para suas automaÃ§Ãµes processarem.